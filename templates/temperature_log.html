{% extends "base.html" %}
{% block title %}Temperature Log{% endblock %}

{% block content %}
<div class="container">
  <h1 style="color: #1E3A8A;">Temperature History</h1>

  <!-- Internal Temperature -->
  <div class="log-section">
    <h2>Internal Temperature</h2>
    <div class="table-responsive">
      <table class="log-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Time</th>
            <th>Temp (째C)</th>
            <th>Humidity (%)</th>
            <th>Apparent (째C)</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for row in internal %}
          <tr>
            <td>{{ row.timestamp[:10] }}</td>
            <td>{{ row.timestamp[11:19] }}</td>
            <td>{{ row.temperature }}</td>
            <td>{{ row.humidity }}</td>
            <td>{{ row.apparent }}</td>
            <td>
              <span class="status-badge
                {% if row.apparent <= 26 %}status-safe
                {% elif row.apparent <= 30 %}status-moderate
                {% elif row.apparent <= 35 %}status-high
                {% else %}status-very-high{% endif %}">
                {% if row.apparent <= 26 %}Safe
                {% elif row.apparent <= 30 %}Moderate
                {% elif row.apparent <= 35 %}High
                {% else %}Very High{% endif %}
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- External Temperature -->
  <div class="log-section">
    <h2>External Temperature</h2>
    <div class="table-responsive">
      <table class="log-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Time</th>
            <th>Temp (째C)</th>
            <th>Humidity (%)</th>
            <th>Apparent (째C)</th>
          </tr>
        </thead>
        <tbody>
          {% for row in external %}
          <tr>
            <td>{{ row.timestamp[:10] }}</td>
            <td>{{ row.timestamp[11:19] }}</td>
            <td>{{ row.temperature }}</td>
            <td>{{ row.humidity }}</td>
            <td>{{ row.apparent }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .log-table {
    width: 100%;
    border-collapse: collapse;
  }
  .log-table th, .log-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  .log-table th {
    background-color: #f5f5f5;
  }
  .status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    color: white;
  }
  .status-safe { background-color: #66bb6a; }
  .status-moderate { background-color: #fff176; color: black; }
  .status-high { background-color: #ffa726; }
  .status-very-high { background-color: #ef5350; }
</style>
{% endblock %}
